Index: pkg-rxvt-unicode/doc/Makefile.in
===================================================================
--- pkg-rxvt-unicode.orig/doc/Makefile.in	2008-06-16 21:22:57.000000000 -0400
+++ pkg-rxvt-unicode/doc/Makefile.in	2008-06-16 21:23:54.000000000 -0400
@@ -36,15 +36,10 @@
 
 POD2MAN = pod2man -n @@RXVT_NAME@@ -r @@RXVT_VERSION@@ -q\" -c "RXVT-UNICODE"
 
-all:
-	sed $(SEDREPLACE) < $(srcdir)/rxvt.1.man.in  >rxvt.1.man
-	sed $(SEDREPLACE) < $(srcdir)/rxvtc.1.man.in >rxvtc.1.man
-	sed $(SEDREPLACE) < $(srcdir)/rxvtd.1.man.in >rxvtd.1.man
-	sed $(SEDREPLACE) < $(srcdir)/rxvt.7.man.in  >rxvt.7.man
-@IF_PERL@	sed $(SEDREPLACE) < $(srcdir)/rxvtperl.3.man.in >rxvtperl.3.man
+all: alldoc
 
-rxvtperl.3.pod: ../src/urxvt.pm
-	cp $< $@
+rxvtperl.3.tbl: ../src/urxvt.pm
+	./podtbl <$< >$@
 
 %.tbl: %.pod
 	$(srcdir)/podtbl <$< >$@
@@ -58,34 +53,58 @@
 %.7.man.in: %.7.tbl
 	$(POD2MAN) -s7 <$< >$@
 
-%.html: %.tbl
-	sed $(SEDREPLACE) <$< | pod2xhtml --css http://res.tst.eu/pod.css >$@
+%.html.in: %.tbl
+	pod2html --css http://res.tst.eu/pod.css <$< >$@
 
-%.txt: %.tbl
-	sed $(SEDREPLACE) <$< | pod2text >$@
+%.txt.in: %.tbl
+	pod2text <$< >$@
 
-../README.configure: rxvt.7.tbl
-	sed $(SEDREPLACE) <$< | podselect -section "CONFIGURE OPTIONS" | pod2text >$@
+README.configure.in: rxvt.7.tbl
+	podselect -section "CONFIGURE OPTIONS" <$< | pod2text >$@
 
-../README.FAQ: rxvt.7.tbl
-	sed $(SEDREPLACE) <$< | podselect -section "RXVT-UNICODE\/URXVT FREQUENTLY ASKED QUESTIONS" | pod2text >$@
+README.FAQ.in: rxvt.7.tbl
+	podselect -section "RXVT-UNICODE\\/URXVT FREQUENTLY ASKED QUESTIONS" <$< | pod2text >$@
+
+%.man: %.man.in
+	sed $(SEDREPLACE) <$< >$@
+%.txt: %.txt.in
+	sed $(SEDREPLACE) <$< >$@
+%.html: %.html.in
+	sed $(SEDREPLACE) <$< >$@
+../README.configure: README.configure.in
+	sed $(SEDREPLACE) <$< >$@
+../README.FAQ: README.FAQ.in
+	sed $(SEDREPLACE) <$< >$@
+
+etc/rxvt-unicode.termcap:
+	infocmp -C rxvt-unicode >$@
 
 tags allbin:
 
-alldoc: rxvt.1.man.in rxvt.7.man.in rxvtc.1.man.in rxvtd.1.man.in rxvtperl.3.man.in \
-	../README.configure ../README.FAQ
-	infocmp -C rxvt-unicode >$(srcdir)/etc/rxvt-unicode.termcap
+alldep:	rxvt.1.man.in  rxvt.7.man.in  rxvtc.1.man.in  rxvtd.1.man.in  rxvtperl.3.man.in \
+	rxvt.1.txt.in  rxvt.7.txt.in  rxvtc.1.txt.in  rxvtd.1.txt.in  rxvtperl.3.txt.in \
+	rxvt.1.html.in rxvt.7.html.in rxvtc.1.html.in rxvtd.1.html.in rxvtperl.3.html.in \
+	README.configure.in README.FAQ.in
+
+alldoc:	rxvt.1.man  rxvt.7.man  rxvtc.1.man  rxvtd.1.man  rxvtperl.3.man \
+	rxvt.1.txt  rxvt.7.txt  rxvtc.1.txt  rxvtd.1.txt  rxvtperl.3.txt \
+	rxvt.1.html rxvt.7.html rxvtc.1.html rxvtd.1.html rxvtperl.3.html \
+	../README.configure ../README.FAQ etc/rxvt-unicode.termcap
 
 clean:
-	rm -f rxvt.1.man rxvt.7.man rxvtc.1.man rxvtd.1.man rxvtperl.3.man
+	rm -f rxvt.1.man  rxvt.7.man  rxvtc.1.man  rxvtd.1.man  rxvtperl.3.man
+	rm -f rxvt.1.txt  rxvt.7.txt  rxvtc.1.txt  rxvtd.1.txt  rxvtperl.3.txt
+	rm -f rxvt.1.html rxvt.7.html rxvtc.1.html rxvtd.1.html rxvtperl.3.html
+	rm -f ../README.configure ../README.FAQ
 
 distclean: clean
-	rm -f Makefile
-
-realclean: distclean
-	rm -f rxvt.1.man.in rxvt.7.man.in rxvtc.1.man.in rxvtd.1.man.in rxvtperl.3.man.in
-	rm -f ../README.configure ../README.FAQ
-	rm -f $(srcdir)/etc/rxvt-unicode.termcap
+	rm -f rxvt.1.tbl rxvt.7.tbl rxvtc.1.tbl rxvtd.1.tbl rxvtperl.3.tbl
+realclean: clean distclean
+	rm -f rxvt.1.man.in  rxvt.7.man.in  rxvtc.1.man.in  rxvtd.1.man.in  rxvtperl.3.man.in
+	rm -f rxvt.1.txt.in  rxvt.7.txt.in  rxvtc.1.txt.in  rxvtd.1.txt.in  rxvtperl.3.txt.in
+	rm -f rxvt.1.html.in rxvt.7.html.in rxvtc.1.html.in rxvtd.1.html.in rxvtperl.3.html.in
+	rm -f README.configure.in README.FAQ.in
+	rm -f pod*.tmp tags *~
 
 cleandir: realclean
 
