Index: rxvt-unicode-7.8/doc/Makefile.in
===================================================================
--- rxvt-unicode-7.8.orig/doc/Makefile.in	2006-07-28 03:24:53.000000000 -0400
+++ rxvt-unicode-7.8/doc/Makefile.in	2006-07-28 03:24:55.000000000 -0400
@@ -36,7 +36,7 @@
 
 #-------------------------------------------------------------------------
 
-all:
+all: alldoc
 
 SEDREPLACE = -e 's%@@RXVT_VERSION@@%$(VERSION)%g;'	\
 	     -e 's%@@RXVT_NAME@@%$(RXVTNAME)%g;'	\
@@ -44,8 +44,8 @@
 	     -e 's%@@RXVT_LIBDIR@@%$(libdir)%g;'	\
 	     -e 's%@@URXVT_NAME@@%urxvt%g;'
 
-rxvtperl.3.pod: ../src/urxvt.pm
-	$(CP) $< $@
+rxvtperl.3.tbl: ../src/urxvt.pm
+	./podtbl $< $@
 
 %.tbl: %.pod
 	./podtbl <$< >$@
@@ -59,53 +59,68 @@
 %.7.man.in: %.7.tbl
 	pod2man -n @@RXVT_NAME@@ -r"$(VERSION)" -q\" -s7 -c "RXVT-UNICODE" <$< >$@
 
-%.html: %.tbl
-	$(SED) $(SEDREPLACE) <$< | pod2html >$@
+%.txt.in: %.tbl
+	pod2text <$< >$@
 
-%.txt: %.tbl
-	$(SED) $(SEDREPLACE) <$< | pod2text >$@
+%.html.in: %.tbl
+	pod2html <$< >$@
 
-../README.configure: rxvt.7.tbl
-	$(SED) $(SEDREPLACE) <$< | podselect -section "CONFIGURE OPTIONS" | pod2text >$@
+README.configure.in: rxvt.7.tbl
+	podselect -section "CONFIGURE OPTIONS" <$< | pod2text >$@
 
-../README.FAQ: rxvt.7.tbl
-	$(SED) $(SEDREPLACE) <$< | podselect -section "RXVT-UNICODE\/URXVT FREQUENTLY ASKED QUESTIONS" | pod2text >$@
+README.FAQ.in: rxvt.7.tbl
+	podselect -section "RXVT-UNICODE\/URXVT FREQUENTLY ASKED QUESTIONS" <$< | pod2text >$@
+
+%.man: %.man.in
+	$(SED) $(SEDREPLACE) <$< >$@
+%.txt: %.txt.in
+	$(SED) $(SEDREPLACE) <$< >$@
+%.html: %.html.in
+	$(SED) $(SEDREPLACE) <$< >$@
+../README.configure: README.configure.in
+	$(SED) $(SEDREPLACE) <$< >$@
+../README.FAQ: README.FAQ.in
+	$(SED) $(SEDREPLACE) <$< >$@
+
+etc/rxvt-unicode.termcap:
+	infocmp -C rxvt-unicode >$@
 
 tags allbin:
 
-alldoc:	rxvt.1.man.in rxvt.7.man.in rxvtc.1.man.in rxvtd.1.man.in rxvtperl.3.man.in \
-	rxvt.1.txt    rxvt.7.txt    rxvtc.1.txt    rxvtd.1.txt    rxvtperl.3.txt \
-	rxvt.1.html   rxvt.7.html   rxvtc.1.html   rxvtd.1.html   rxvtperl.3.html \
-	../README.configure ../README.FAQ
-	infocmp -C rxvt-unicode >etc/rxvt-unicode.termcap
+alldep:	rxvt.1.man.in  rxvt.7.man.in  rxvtc.1.man.in  rxvtd.1.man.in  rxvtperl.3.man.in \
+	rxvt.1.txt.in  rxvt.7.txt.in  rxvtc.1.txt.in  rxvtd.1.txt.in  rxvtperl.3.txt.in \
+	rxvt.1.html.in rxvt.7.html.in rxvtc.1.html.in rxvtd.1.html.in rxvtperl.3.html.in \
+	README.configure.in README.FAQ.in
+
+alldoc:	rxvt.1.man  rxvt.7.man  rxvtc.1.man  rxvtd.1.man  rxvtperl.3.man \
+	rxvt.1.txt  rxvt.7.txt  rxvtc.1.txt  rxvtd.1.txt  rxvtperl.3.txt \
+	rxvt.1.html rxvt.7.html rxvtc.1.html rxvtd.1.html rxvtperl.3.html \
+	../README.configure ../README.FAQ etc/rxvt-unicode.termcap
 
 clean:
-	rm -f *~
-
-realclean: clean
-	rm -f tags ../README.configure ../README.FAQ
-	rm -f rxvt.1.man.in rxvt.7.man.in rxvtc.1.man.in rxvtd.1.man.in
-	rm -f rxvt.1.man    rxvt.7.man    rxvtc.1.man    rxvtd.1.man   
-	rm -f rxvt.1.txt    rxvt.7.txt    rxvtc.1.txt    rxvtd.1.txt
-	rm -f rxvt.1.html   rxvt.7.html   rxvtc.1.html   rxvtd.1.html
-
-cleandir: realclean
+	rm -f rxvt.1.man  rxvt.7.man  rxvtc.1.man  rxvtd.1.man  rxvtperl.3.man
+	rm -f rxvt.1.txt  rxvt.7.txt  rxvtc.1.txt  rxvtd.1.txt  rxvtperl.3.txt
+	rm -f rxvt.1.html rxvt.7.html rxvtc.1.html rxvtd.1.html rxvtperl.3.html
+	rm -f ../README.configure ../README.FAQ
+
+distclean: clean
+	rm -f rxvt.1.tbl rxvt.7.tbl rxvtc.1.tbl rxvtd.1.tbl rxvtperl.3.tbl
+
+realclean: clean distclean
+	rm -f rxvt.1.man.in  rxvt.7.man.in  rxvtc.1.man.in  rxvtd.1.man.in  rxvtperl.3.man.in
+	rm -f rxvt.1.txt.in  rxvt.7.txt.in  rxvtc.1.txt.in  rxvtd.1.txt.in  rxvtperl.3.txt.in
+	rm -f rxvt.1.html.in rxvt.7.html.in rxvtc.1.html.in rxvtd.1.html.in rxvtperl.3.html.in
+	rm -f README.configure.in README.FAQ.in
+	rm -f pod*.tmp tags *~
 
-distclean:
-
-install:
+install: alldoc
 	$(INSTALL) -d $(DESTDIR)$(man1dir)
-	$(SED) $(SEDREPLACE) < rxvt.1.man.in >rxvt.1.man
 	$(INSTALL_DATA) rxvt.1.man $(DESTDIR)$(man1dir)/$(RXVTNAME).$(man1ext)
-	$(SED) $(SEDREPLACE) < rxvtc.1.man.in >rxvtc.1.man
 	$(INSTALL_DATA) rxvtc.1.man $(DESTDIR)$(man1dir)/$(RXVTNAME)c.$(man1ext)
-	$(SED) $(SEDREPLACE) < rxvtd.1.man.in >rxvtd.1.man
 	$(INSTALL_DATA) rxvtd.1.man $(DESTDIR)$(man1dir)/$(RXVTNAME)d.$(man1ext)
 	$(INSTALL) -d $(DESTDIR)$(man7dir)
-	$(SED) $(SEDREPLACE) < rxvt.7.man.in >rxvt.7.man
 	$(INSTALL_DATA) rxvt.7.man $(DESTDIR)$(man7dir)/$(RXVTNAME).$(man7ext)
 @IF_PERL@	$(INSTALL) -d $(DESTDIR)$(man3dir)
-@IF_PERL@	$(SED) $(SEDREPLACE) < rxvtperl.3.man.in >rxvtperl.3.man
 @IF_PERL@	$(INSTALL_DATA) rxvtperl.3.man $(DESTDIR)$(man3dir)/$(RXVTNAME)perl.$(man3ext)
 	if test -x "@TIC@"; then if test -n "@TIC@"; then @TIC@ etc/rxvt-unicode.terminfo; fi; fi
 
@@ -116,3 +131,5 @@
 
 # ------------------------------------------------------------------------
 # DO NOT DELETE: ugly dependency list follows
+
+.SECONDARY: rxvt.1.tbl rxvt.7.tbl rxvtc.1.tbl rxvtd.1.tbl rxvtperl.3.tbl
